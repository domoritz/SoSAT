import matplotlib.pyplot as plt
import numpy as np
from pylab import figure, cm
from matplotlib.colors import LogNorm
from matplotlib.ticker import LogLocator, LogFormatter 
from mpl_toolkits.axes_grid1 import ImageGrid

def get_demo_image():
    import numpy as np
    #z = np.array([[12.704, 13.204, 7.094, 7.335, 8.020, 11.808, 13.329, 15.012, 14.884, 16.644], [38.979, 38.896, 28.965, 30.775, 3.655, 4.616, 4.448, 4.873, 5.713, 6.724], [4.894, 4.870, 4.616, 4.681, 6.786, 6.134, 7.686, 9.412, 9.340, 10.054], [7.538, 7.540, 7.511, 7.529, 7.423, 7.513, 7.631, 8.003, 8.653, 8.853], [78.95,78.95,78.95,78.95,78.95,78.95,78.95,78.95,78.95,78.95], [9.842,9.842,9.842,9.842,9.842,9.842,9.842,9.842,10.385, 10.082], [4.31,4.31,4.31,4.31,4.31,4.31,4.31,4.31,4.31,4.31],[6.11, 6, 5.953, 6.158, 5.769, 6.282, 5.583, 5.887, 6.061, 5.656], [4.551, 4.352, 4.602, 4.512, 4.477, 4.427, 4.475, 4.422, 4.511, 4.563], [8.313,8.313,8.313,8.313,8.313,8.313,8.313,8.313,8.313,8.313], [15.184,15.184,15.184,15.184,15.184,15.184,15.184,15.184,15.184,15.184]])
    z = np.array([[38.24, 1547.41, 2007.19, 10.87, 595.86, 631.72, 15.58, 4.07, 4.63, 8.42, 15.45], [39.74, 1540.34, 1989.38, 11.31, 591.51, 643.42, 15.36, 4.27, 4.75, 8.19, 15.63], [42.44, 1024.56, 1993.41, 11.31, 592.93, 637.58, 15.62, 4.43, 4.68, 8.18, 15.75], [43.33, 935.17, 1974.35, 11.76, 580.81, 641.9, 14.07, 4.34, 4.84, 8.31, 15.48], [54.78, 883, 850.99, 11.05, 591.34, 649.16, 15.52, 4.30, 4.65, 8.18, 15.79], [2.42, 639.78, 7778, 11.53, 590.12, 643.15, 16.34, 4.52, 4.65, 8.32, 15.78], [2.68, 750.46, 1172.95, 10.93, 588.67, 651.43, 16.23, 4.45, 4.65, 8.29, 16.14], [3.19, 851.01, 4883, 10.72, 585.89, 646.01, 16.68, 3.96, 4.57, 8.27, 15.48], [2.97, 21.62, 4000, 10.72, 585.89, 646.01, 16.68, 3.96, 4.57, 8.27, 15.48]]).transpose() / 3.0
    print z
    return z 

fig = plt.figure()
Z = get_demo_image() # demo image


vmin, vmax = 0.25, 700 # 350
ax = fig.add_subplot(111)
#im = ax.imshow(Z, origin="lower", vmin=vmin, vmax=vmax, interpolation="nearest")
im = ax.matshow(Z, vmin=vmin, extent=(1,11,11,0), vmax=vmax, norm=LogNorm(vmin=vmin, vmax=vmax))
l_f = LogFormatter(50, labelOnlyBase=False) 
cb = plt.colorbar(im, format=l_f, ticks=[0.25, 0.5, 1, 1.5, 2, 3, 5, 10, 200, 250, 350, 500, 650])
cb.set_label("runtime (seconds)")
ax.set_xlabel("number of threads")
ax.set_xticks(np.arange(10)+1)
ax.set_ylabel("number of factorings")
ax.set_yticks(np.arange(11))

plt.show()

